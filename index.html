<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MD Preview</title>
    <style>
      /* Prevent flash - set body bg immediately */
      html, body {
        margin: 0;
        padding: 0;
        background: #1e1e1e;
      }
      html.light, html.light body {
        background: #ffffff;
      }
      /* Splash screen - shown immediately before JS loads */
      #splash {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #1e1e1e;
        z-index: 9999;
        transition: opacity 0.3s ease-out;
      }
      html.light #splash {
        background: #ffffff;
      }
      #splash.hidden {
        opacity: 0;
        pointer-events: none;
      }
      #splash svg {
        width: 96px;
        height: 96px;
        animation: pulse 1.5s ease-in-out infinite;
      }
      @keyframes pulse {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.7; transform: scale(0.95); }
      }
      /* Hide root until ready */
      #root:empty {
        display: none;
      }
    </style>
    <script>
      // Apply saved theme immediately to prevent flash
      if (localStorage.getItem('theme') === 'light') {
        document.documentElement.classList.add('light');
      }
    </script>
  </head>
  <body>
    <!-- Splash screen with inline SVG for instant display -->
    <div id="splash">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <defs>
          <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#6366f1"/>
            <stop offset="50%" style="stop-color:#8b5cf6"/>
            <stop offset="100%" style="stop-color:#a855f7"/>
          </linearGradient>
          <linearGradient id="shine" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:white;stop-opacity:0.25"/>
            <stop offset="50%" style="stop-color:white;stop-opacity:0.05"/>
            <stop offset="100%" style="stop-color:white;stop-opacity:0"/>
          </linearGradient>
          <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#4c1d95" flood-opacity="0.3"/>
          </filter>
          <filter id="glow">
            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <rect x="32" y="32" width="448" height="448" rx="96" ry="96" fill="url(#bgGradient)"/>
        <rect x="32" y="32" width="448" height="448" rx="96" ry="96" fill="url(#shine)"/>
        <g transform="translate(256, 256) rotate(-3) translate(-256, -256)">
          <rect x="120" y="100" width="272" height="312" rx="20" ry="20" fill="white" filter="url(#shadow)"/>
          <rect x="152" y="140" width="140" height="16" rx="4" fill="#e0e7ff"/>
          <rect x="152" y="172" width="208" height="10" rx="3" fill="#c7d2fe"/>
          <rect x="152" y="192" width="180" height="10" rx="3" fill="#c7d2fe"/>
          <rect x="152" y="212" width="195" height="10" rx="3" fill="#c7d2fe"/>
          <rect x="152" y="242" width="208" height="2" rx="1" fill="#e0e7ff"/>
          <rect x="152" y="264" width="100" height="14" rx="4" fill="#e0e7ff"/>
          <rect x="152" y="292" width="208" height="10" rx="3" fill="#c7d2fe"/>
          <rect x="152" y="312" width="160" height="10" rx="3" fill="#c7d2fe"/>
          <rect x="152" y="332" width="185" height="10" rx="3" fill="#c7d2fe"/>
          <rect x="152" y="352" width="140" height="10" rx="3" fill="#c7d2fe"/>
        </g>
        <g filter="url(#shadow)">
          <circle cx="380" cy="380" r="70" fill="#1e1b4b"/>
          <circle cx="380" cy="380" r="70" fill="url(#shine)"/>
          <path d="M340 405 L340 355 L358 355 L380 382 L402 355 L420 355 L420 405 L405 405 L405 378 L380 405 L355 378 L355 405 Z" fill="white" filter="url(#glow)"/>
          <path d="M372 415 L380 425 L388 415" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity="0.8"/>
        </g>
      </svg>
    </div>
    <div id="root"></div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
